<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Rpt_CloseCash" pageWidth="567" pageHeight="814" whenNoDataType="BlankPage" columnWidth="567" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isSummaryWithPageHeaderAndFooter="true" uuid="cfaf7223-c06e-4591-8e0f-b406a2336150">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
	<parameter name="NUMBERFORMAT" class="java.text.DecimalFormat" isForPrompting="false">
		<defaultValueExpression><![CDATA[new DecimalFormat("###,##0.00;-###,##0.00", new DecimalFormatSymbols())]]></defaultValueExpression>
	</parameter>
	<parameter name="NUMBERDECIMAL" class="java.lang.Integer" isForPrompting="false">
		<defaultValueExpression><![CDATA[2]]></defaultValueExpression>
	</parameter>
	<parameter name="DOCUMENT_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="BASE_WEB" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SOURCE_PATH" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="AD_USER_ID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["100"]]></defaultValueExpression>
	</parameter>
	<parameter name="SETUP_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fecha_c" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[--DETALLE DE RECAPS g9
SELECT TO_CHAR(ft.Statementdate,'dd/MM/yyyy') as fecha_t
, get_uuid() as c_usuario
, ft.EM_Ssccr_Lot  as doc
, sb.name as cliente
, st.name as m_pago
, sc.name as t_doc
, '' as factura
, ft.Depositamt as total
, false as cd
, 'DETALLE DE RECAPS' as grupo
, 9 as c_grupo
, '' as texto
FROM FIN_Financial_Account fa
left join FIN_Finacc_Transaction ft on ft.FIN_Financial_Account_id=fa.FIN_Financial_Account_id
left join Ssccr_Cards_Types sc on ft.EM_Ssccr_Cards_Types_ID=sc.Ssccr_Cards_Types_ID
left join Ssfi_Banktransfer sb on ft.EM_Ssccr_Ssfi_Banktransfer_ID=sb.Ssfi_Banktransfer_ID
left join Ssccr_Types_Of_Credit st on ft.EM_Ssccr_Types_Of_Credit_ID=st.Ssccr_Types_Of_Credit_ID
left join FIN_payment py on py.FIN_payment_id=ft.FIN_payment_id
JOIN ( SELECT sd.C_DocType_id,ss.Sccc_Setup_ID
FROM Sccc_Setup ss
JOIN Ssccso_Type_Of_Document sd on sd.Sccc_Setup_ID = ss.Sccc_Setup_ID
GROUP BY 1,2
) dc on dc.C_DocType_id=py.C_DocType_id AND dc.Sccc_Setup_ID=$P{SETUP_ID}
WHERE Trxtype='BPD'
AND sc.name is not null
AND TO_CHAR(ft.Statementdate,'dd/MM/yyyy') = $P{fecha_c}
ORDER BY t_doc,cliente]]>
	</queryString>
	<field name="fecha_t" class="java.lang.String"/>
	<field name="c_usuario" class="java.lang.String"/>
	<field name="doc" class="java.lang.String"/>
	<field name="cliente" class="java.lang.String"/>
	<field name="m_pago" class="java.lang.String"/>
	<field name="t_doc" class="java.lang.String"/>
	<field name="factura" class="java.lang.String"/>
	<field name="total" class="java.math.BigDecimal"/>
	<field name="cd" class="java.lang.Boolean"/>
	<field name="grupo" class="java.lang.String"/>
	<field name="c_grupo" class="java.lang.Integer"/>
	<field name="texto" class="java.lang.String"/>
	<variable name="REPORT_PAGE" class="java.lang.Integer" resetType="None" incrementType="Page">
		<variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
	</variable>
	<variable name="subtotal_g" class="java.math.BigDecimal" resetType="Group" resetGroup="Transacction" calculation="Sum">
		<variableExpression><![CDATA[$F{total}]]></variableExpression>
	</variable>
	<variable name="total_vc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==1? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_cc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==2? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_oc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==3? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_rc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==4? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_ie" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==4? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_vcr" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==2? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_credito_contado" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{c_grupo}==12? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="total_ccr" class="java.math.BigDecimal" calculation="Sum"/>
	<variable name="total_rcr" class="java.math.BigDecimal" calculation="Sum"/>
	<variable name="efectivo" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{m_pago}.toUpperCase().contains("EFECTIVO") && ($F{c_grupo}==2 || $F{c_grupo}==3 || $F{c_grupo}==4)? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="cheque" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{m_pago}.toUpperCase().contains("CHEQUE") && ($F{c_grupo}==2 || $F{c_grupo}==3 || $F{c_grupo}==4)? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="tarjeta" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{m_pago}.toUpperCase().contains("TARJETA") && ($F{c_grupo}==2||$F{c_grupo}==3 || $F{c_grupo}==4)? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="transferencia" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[( $F{m_pago}.toUpperCase().contains("TRANSFERENCIA") && ($F{c_grupo}==2 ||$F{c_grupo}==3 || $F{c_grupo}==4)? $F{total} : 0 )]]></variableExpression>
	</variable>
	<variable name="deposito" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[(($F{m_pago}.toUpperCase().contains("DEPÓSITO")) && ($F{c_grupo}==2 || $F{c_grupo}==3 || $F{c_grupo}==4)? $F{total} : 0 )]]></variableExpression>
	</variable>
	<group name="Transacction">
		<groupExpression><![CDATA[$F{c_grupo}]]></groupExpression>
		<groupHeader>
			<band height="26">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="0" y="1" width="567" height="15" isRemoveLineWhenBlank="true" uuid="03cc39dd-8453-416c-8379-ccd19a01e400">
						<printWhenExpression><![CDATA[$F{c_grupo}<10]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3">
						<topPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{grupo}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-12" x="0" y="16" width="104" height="10" isRemoveLineWhenBlank="true" uuid="024f14b1-a01d-4318-8bb4-9e144e854eab">
						<printWhenExpression><![CDATA[$F{c_grupo}.equals(new Integer(9))]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3" rightPadding="3">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true" isUnderline="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[LOTE ]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-12" x="104" y="16" width="81" height="10" isRemoveLineWhenBlank="true" uuid="a278ab2a-f7c7-4516-9318-bb0a6ac9ca56">
						<printWhenExpression><![CDATA[$F{c_grupo}.equals(new Integer(9))]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3" rightPadding="3">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true" isUnderline="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[TARJETA]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-12" x="185" y="16" width="175" height="10" isRemoveLineWhenBlank="true" uuid="d49229f3-338b-4f26-aa86-6b1b434892c4">
						<printWhenExpression><![CDATA[$F{c_grupo}.equals(new Integer(9))]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3" rightPadding="3">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true" isUnderline="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[BANCO EMISOR]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-12" x="360" y="16" width="140" height="10" isRemoveLineWhenBlank="true" uuid="3981bd29-8394-4340-901b-90c8aeb6d07e">
						<printWhenExpression><![CDATA[$F{c_grupo}.equals(new Integer(9))]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3" rightPadding="3">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true" isUnderline="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[TIPO DE CRÉDITO]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-12" x="500" y="16" width="67" height="10" isRemoveLineWhenBlank="true" uuid="be9d02d7-1c6f-408d-a67d-9cfbe5b916fd">
						<printWhenExpression><![CDATA[$F{c_grupo}.equals(new Integer(9))]]></printWhenExpression>
					</reportElement>
					<box leftPadding="3" rightPadding="3">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true" isUnderline="false" pdfFontName="Helvetica"/>
					</textElement>
					<text><![CDATA[VALOR]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="15">
				<textField isBlankWhenNull="true">
					<reportElement key="staticText-12" x="0" y="0" width="500" height="15" isRemoveLineWhenBlank="true" uuid="b518e68b-10e2-4e18-97cd-16cb0080789d">
						<printWhenExpression><![CDATA[!($F{c_grupo}.equals(new Integer(8))|| $F{c_grupo}.equals(new Integer(12))||$F{c_grupo}.equals(new Integer(20)))]]></printWhenExpression>
					</reportElement>
					<box rightPadding="5"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" markup="none">
						<font size="8" isBold="true" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{texto}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="500" y="0" width="67" height="15" isRemoveLineWhenBlank="true" forecolor="#010101" uuid="a29d85e3-195c-4a1c-9cad-4fd3427b4c9e">
						<printWhenExpression><![CDATA[!($F{c_grupo}.equals(new Integer(8))|| $F{c_grupo}.equals(new Integer(12))||$F{c_grupo}.equals(new Integer(20)))]]></printWhenExpression>
					</reportElement>
					<box rightPadding="3">
						<topPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{subtotal_g}]]></textFieldExpression>
					<patternExpression><![CDATA[$P{NUMBERFORMAT}.toPattern()]]></patternExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="11">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement x="185" y="0" width="175" height="11" isPrintWhenDetailOverflows="true" forecolor="#010101" uuid="b4c5e51d-7b6a-4b27-b80d-a712347dd084"/>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
				<patternExpression><![CDATA[$P{NUMBERFORMAT}.toPattern()]]></patternExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="104" y="0" width="81" height="11" isPrintWhenDetailOverflows="true" forecolor="#010101" uuid="05674839-af17-4738-8ee1-d1c16148b61d"/>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{c_grupo}.equals(new Integer(9)))?$F{t_doc}:$F{doc}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="360" y="0" width="140" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" forecolor="#010101" uuid="358aa113-2256-46b9-a771-45682ad0b831">
					<printWhenExpression><![CDATA[$F{c_grupo}<12]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{m_pago}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="500" y="0" width="67" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" forecolor="#010101" uuid="9e31a365-2bad-4ba8-a1e6-fa78e2e6f9a2">
					<printWhenExpression><![CDATA[$F{c_grupo}<12]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
				<patternExpression><![CDATA[$P{NUMBERFORMAT}.toPattern()]]></patternExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="104" height="11" isPrintWhenDetailOverflows="true" forecolor="#010101" uuid="7b7cccbf-c056-42fd-af53-0babe881bc3a"/>
				<box leftPadding="3" rightPadding="3">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{c_grupo}.equals(new Integer(9)))?$F{doc}:$F{t_doc}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
</jasperReport>
